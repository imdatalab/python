{"cells":[{"cell_type":"markdown","metadata":{"id":"xzdLFUCJvZS5"},"source":["# 함수 사용\n","\n","- 데이터에 적용되는 다양한 함수 사용법을 다룬다\n","- def, lambda, map, apply"]},{"cell_type":"markdown","metadata":{"id":"KzykASmfvZTN"},"source":["## import"]},{"cell_type":"code","execution_count":1,"metadata":{"id":"WGrTHR77vZTP","executionInfo":{"status":"ok","timestamp":1659682953368,"user_tz":-540,"elapsed":809,"user":{"displayName":"HwaMin Lee","userId":"15898946663716728110"}}},"outputs":[],"source":["import pandas as pd\n","import numpy as np"]},{"cell_type":"markdown","metadata":{"id":"NJHVJxV5vZTR"},"source":["# def \n","- 반복 사용되는 작업은 함수로 만들어 두면 편리하게 다시 사용할 수 있다\n","- 함수를 정의(define)할 때 def를 사용한다\n","- def 함수명(인자) : 형태로 정의 \n","- 함수를 호출할 때 인자를 넘겨줄 수 있다\n","- 함수 실행 결과로 어떤 값을 받으려면 return 문을 사용한다"]},{"cell_type":"markdown","metadata":{"id":"fdTzaQXNvZTT"},"source":["## 리턴 값 정의\n","- return을 사용하며, 임의의 형태의 묶음 데이터도 리턴할 수 있다"]},{"cell_type":"markdown","metadata":{"id":"_TlxgBPovZTU"},"source":["## 인자"]},{"cell_type":"code","execution_count":3,"metadata":{"id":"ivrg1ew2vZTV","outputId":"86c51250-d3c1-4f87-868f-ef5397c0dd7e","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1659683064578,"user_tz":-540,"elapsed":325,"user":{"displayName":"HwaMin Lee","userId":"15898946663716728110"}}},"outputs":[{"output_type":"execute_result","data":{"text/plain":["10"]},"metadata":{},"execution_count":3}],"source":["## 인자로 받은 값의 두 배를 리턴하는 함수 정의\n","\n","def double(x):\n","    return x*2\n","\n","double(5)"]},{"cell_type":"code","execution_count":4,"metadata":{"id":"h1qKK_LqvZTX","outputId":"cc5d7811-5a80-4a2a-d689-c626d0947c76","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1659683068940,"user_tz":-540,"elapsed":3,"user":{"displayName":"HwaMin Lee","userId":"15898946663716728110"}}},"outputs":[{"output_type":"execute_result","data":{"text/plain":["(123, 6)"]},"metadata":{},"execution_count":4}],"source":["## 인자와 리턴값이 둘 이상인 함수 정의\n","\n","def f_1(a,b,c): \n","    return a*100 + b*10 + c, a+b+c\n","\n","x, y = f_1(1, 2, 3)\n","x, y"]},{"cell_type":"markdown","metadata":{"id":"WXyfYRNSvZTY"},"source":["### 디폴트 값이 일부만 지정된 경우\n","- 주의: 디폴트 값이 없는 인자는 앞에 배치해야 한다\n","- 디폴트 값이 없는 인자는 필수 입력 인자임"]},{"cell_type":"code","execution_count":6,"metadata":{"id":"_dq-SozuvZTZ","outputId":"5e240a40-cc85-4ecb-97a5-eb836196ef97","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1659683156461,"user_tz":-540,"elapsed":303,"user":{"displayName":"HwaMin Lee","userId":"15898946663716728110"}}},"outputs":[{"output_type":"stream","name":"stdout","text":["123\n","583\n","369\n","924\n"]}],"source":["## 일부 인자에 디폴트 값을 지정하는 함수 정의\n","\n","def f_2(a,b=2,c=3): \n","    return a*100 + b*10 + c\n","\n","print(f_2(1))      # 123, 반드시 하나 이상의 인자가 필요하며 a로 사용된다\n","print(f_2(5,8))    # 383, 앞에서부터 차례로 a,b로 사용된다\n","print(f_2(3,6,9))  # 369, 앞에서부터 차례로 a,b,c로 사용된다\n","print(f_2(c=4,a=9))# 924, 순서에 관계없이 인자를 지정할 수 있다\n","                   # 인자 a는 필수로 지정해야 한다"]},{"cell_type":"code","source":["f_2(3, 6, 9)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"dSDi7rwB03S_","executionInfo":{"status":"ok","timestamp":1659683209518,"user_tz":-540,"elapsed":283,"user":{"displayName":"HwaMin Lee","userId":"15898946663716728110"}},"outputId":"37f93597-8250-402f-db10-8b6bb2388eb6"},"execution_count":7,"outputs":[{"output_type":"execute_result","data":{"text/plain":["369"]},"metadata":{},"execution_count":7}]},{"cell_type":"markdown","metadata":{"id":"ck8mVaB5vZTa"},"source":["# 편리한 함수 사용법\n","\n","- lambda, map, apply"]},{"cell_type":"markdown","metadata":{"id":"iS9jt3qZvZTb"},"source":["## lambda, 익명 함수 정의\n","- def, return을 사용하지 않고 간단히 함수를 정의할 수 있다"]},{"cell_type":"code","execution_count":8,"metadata":{"id":"n22e0C_jvZTc","outputId":"9ec4abda-e7cb-45fe-c72f-13530cd8f06f","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1659683218514,"user_tz":-540,"elapsed":471,"user":{"displayName":"HwaMin Lee","userId":"15898946663716728110"}}},"outputs":[{"output_type":"execute_result","data":{"text/plain":["40"]},"metadata":{},"execution_count":8}],"source":["## def, return을 사용하지 않는 간단한 함수 정의법\n","\n","my_f = lambda x: x*10\n","\n","my_f(4)"]},{"cell_type":"code","source":["my_f(50)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"AuBZAddq1ETB","executionInfo":{"status":"ok","timestamp":1659683240229,"user_tz":-540,"elapsed":283,"user":{"displayName":"HwaMin Lee","userId":"15898946663716728110"}},"outputId":"c006bcfb-c051-4937-ebef-2e9ab1d5bdcf"},"execution_count":9,"outputs":[{"output_type":"execute_result","data":{"text/plain":["500"]},"metadata":{},"execution_count":9}]},{"cell_type":"markdown","metadata":{"id":"M4VUhj6gvZTc"},"source":["## map, 리스트에 함수 적용하기\n","\n","- map의 첫번째 인자에는 함수를, 두번째 인자에는 데이터를 넣는다\n","- 리스트 외에도 튜플, 배열에 대해서도 사용할 수 있다\n","- 별도로 함수를 정의하지 않고 lambda를 사용하여 함수 내용만 정의할 수 있다"]},{"cell_type":"code","execution_count":11,"metadata":{"id":"8qJkglHLvZTd","outputId":"cd07b4c6-a777-4937-fbb8-3a30bfa5add3","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1659683278297,"user_tz":-540,"elapsed":342,"user":{"displayName":"HwaMin Lee","userId":"15898946663716728110"}}},"outputs":[{"output_type":"execute_result","data":{"text/plain":["[10, 20, 30, 40]"]},"metadata":{},"execution_count":11}],"source":["## 이미 정의된 함수명 my_f를 map()에 사용하는 예\n","\n","data = [1,2,3,4]\n","y = list(map(my_f, data))\n","y"]},{"cell_type":"code","source":["data1 = 5, 6, 7, 8, 9, 10\n","y = list(map(my_f, data1))\n","y"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"SW62Clh51UpD","executionInfo":{"status":"ok","timestamp":1659683406295,"user_tz":-540,"elapsed":300,"user":{"displayName":"HwaMin Lee","userId":"15898946663716728110"}},"outputId":"4bd0e694-2f89-4f22-cd53-c4bf0a50342a"},"execution_count":15,"outputs":[{"output_type":"execute_result","data":{"text/plain":["[50, 60, 70, 80, 90, 100]"]},"metadata":{},"execution_count":15}]},{"cell_type":"code","execution_count":13,"metadata":{"id":"NdTm0hrNvZTe","outputId":"ed3e51c2-93c5-4840-df4b-6e43e3b0cc21","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1659683348581,"user_tz":-540,"elapsed":277,"user":{"displayName":"HwaMin Lee","userId":"15898946663716728110"}}},"outputs":[{"output_type":"execute_result","data":{"text/plain":["[10, 20, 30, 40]"]},"metadata":{},"execution_count":13}],"source":["# lambda를 사용하는 방법 (익명 함수)\n","list(map(lambda i: i*10, data))"]},{"cell_type":"code","source":["list(map(lambda i: np.log10(i), data1))"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"L-oOD5eu1kpp","executionInfo":{"status":"ok","timestamp":1659683465521,"user_tz":-540,"elapsed":3,"user":{"displayName":"HwaMin Lee","userId":"15898946663716728110"}},"outputId":"075e626c-c22e-4247-cd5d-987cf0b68cd1"},"execution_count":17,"outputs":[{"output_type":"execute_result","data":{"text/plain":["[0.6989700043360189,\n"," 0.7781512503836436,\n"," 0.8450980400142568,\n"," 0.9030899869919435,\n"," 0.9542425094393249,\n"," 1.0]"]},"metadata":{},"execution_count":17}]},{"cell_type":"markdown","metadata":{"id":"KLbbcqv3vZTf"},"source":["## apply, 시리즈나 데이터프레임에 함수 적용\n","\n","- apply는 리스트, 튜플, 배열에는 사용할 수 없다"]},{"cell_type":"code","execution_count":18,"metadata":{"scrolled":true,"id":"xD8boNJ7vZTg","outputId":"dbca7b5a-50f3-403d-d376-cb1ee3e84ea2","colab":{"base_uri":"https://localhost:8080/","height":206},"executionInfo":{"status":"ok","timestamp":1659683475740,"user_tz":-540,"elapsed":311,"user":{"displayName":"HwaMin Lee","userId":"15898946663716728110"}}},"outputs":[{"output_type":"execute_result","data":{"text/plain":["  city  population  temp  cars\n","0   서울         990    13   300\n","1   부산         350    16   120\n","2   대구         250    14    80\n","3   대전         154    13    90\n","4   광주         150    15    70"],"text/html":["\n","  <div id=\"df-76dbb492-36bd-4287-a789-58efe8b5f5d1\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>city</th>\n","      <th>population</th>\n","      <th>temp</th>\n","      <th>cars</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>서울</td>\n","      <td>990</td>\n","      <td>13</td>\n","      <td>300</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>부산</td>\n","      <td>350</td>\n","      <td>16</td>\n","      <td>120</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>대구</td>\n","      <td>250</td>\n","      <td>14</td>\n","      <td>80</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>대전</td>\n","      <td>154</td>\n","      <td>13</td>\n","      <td>90</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>광주</td>\n","      <td>150</td>\n","      <td>15</td>\n","      <td>70</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-76dbb492-36bd-4287-a789-58efe8b5f5d1')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-76dbb492-36bd-4287-a789-58efe8b5f5d1 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-76dbb492-36bd-4287-a789-58efe8b5f5d1');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":18}],"source":["## 데이터프레임 생성\n","\n","x = {'city': ['서울', '부산', '대구', '대전', '광주'],\n","     'population': [990, 350, 250, 154, 150],\n","     'temp': [13, 16, 14, 13, 15],\n","     'cars': [300, 120, 80, 90, 70]}\n","\n","df = pd.DataFrame(x)\n","df"]},{"cell_type":"code","execution_count":19,"metadata":{"id":"8SdQb2htvZTi","outputId":"8d9e23c2-298e-4c41-d177-2e3f8db339a9","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1659683479958,"user_tz":-540,"elapsed":288,"user":{"displayName":"HwaMin Lee","userId":"15898946663716728110"}}},"outputs":[{"output_type":"execute_result","data":{"text/plain":["population    378.8\n","temp           14.2\n","dtype: float64"]},"metadata":{},"execution_count":19}],"source":["## 데이터프레임(시리즈)의 평균값 구하기\n","\n","df[[\"population\",\"temp\"]].apply(lambda x: x.mean())"]},{"cell_type":"code","source":["df.apply(lambda x: x.count())"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"ccNDeiyb2KNS","executionInfo":{"status":"ok","timestamp":1659683654674,"user_tz":-540,"elapsed":764,"user":{"displayName":"HwaMin Lee","userId":"15898946663716728110"}},"outputId":"feb141fb-d934-46c5-ce8d-6d18cbe4035c"},"execution_count":23,"outputs":[{"output_type":"execute_result","data":{"text/plain":["city          5\n","population    5\n","temp          5\n","cars          5\n","dtype: int64"]},"metadata":{},"execution_count":23}]}],"metadata":{"kernelspec":{"display_name":"Python 3","language":"python","name":"python3"},"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.8.8"},"toc":{"base_numbering":1,"nav_menu":{},"number_sections":false,"sideBar":true,"skip_h1_title":false,"title_cell":"Table of Contents","title_sidebar":"Contents","toc_cell":false,"toc_position":{"height":"calc(100% - 180px)","left":"10px","top":"150px","width":"209.65px"},"toc_section_display":true,"toc_window_display":true},"colab":{"name":"0805_4_Function.ipynb의 사본","provenance":[{"file_id":"https://github.com/data-labs/python-machine-learning/blob/main/b25_Function.ipynb","timestamp":1659681744951}],"collapsed_sections":[]}},"nbformat":4,"nbformat_minor":0}